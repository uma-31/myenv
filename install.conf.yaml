- defaults:
    link:
      relink: true

- clean:
    ~/:
      force: true

- create:
    ~/.zsh/rc:

- pkg-install:
    pkgs:
      - curl
      - direnv
      - gh
      - jq
      - peco
      - pipx
      - tree
      - vim
      - zsh
    priority: apt-get

- anyenv-install:
    setup-anyenv: true
    anyenvs:
      - pyenv
      - nodenv

- git-clone:
    - repo: zplug/zplug
      dir: ~/.zplug

- shell:
    - command: |-
        if [[ "$SHELL" =~ zsh ]]; then
          echo "Skipping login shell change, already using zsh."
        else
          chsh -s $(which zsh)
        fi
      description: Making zsh the default shell
      stdin: true
      stdout: true
      stderr: true
    - command: |-
        curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
          https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
      description: Installing vim-plug

- link:
    # zsh
    ~/.zshrc:
      path: dotfiles/zsh/zshrc
    ~/.zsh/rc/aliases.zshrc:
      path: dotfiles/zsh/aliases.zshrc
      create: true
    ~/.zsh/rc/zplug.zshrc:
      path: dotfiles/zsh/zplug.zshrc
      create: true
    # vim
    ~/.vimrc:
      path: dotfiles/vimrc
