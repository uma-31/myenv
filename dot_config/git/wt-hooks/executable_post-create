#!/usr/bin/env bash

set -euo pipefail

_command_exists() {
  command -v "$1" >/dev/null 2>&1
}

_has_mise_config() {
  [[ -f mise.toml ]] || \
  [[ -f .mise.toml ]] || \
  [[ -f mise.local.toml ]] || \
  [[ -f .mise/config.toml ]] || \
  [[ -d mise ]] || \
  [[ -d .mise ]] || \
  [[ -f .config/mise.toml ]] || \
  [[ -d .config/mise ]]
}

if _command_exists mise && _has_mise_config; then
  echo "[git-wt][post-create] Mise の設定ファイルを検出しました。trust を実行します..."
  mise trust
fi
